<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<script src="common.js"></script>
<body>

   <form action="01_register.php" method="post">
       <p>
           登录名称：<input type="text" name="uname" id="uname" onblur="check_uanme()">
           <span id="uname_show"></span>
       </p>
       <p>
           登录密码：<input type="password" name="upwd" id="upwd" >
       </p>
       <p>
           确认密码：<input type="password" name="cpwd" id="cpwd" onblur="check_pwd()">
           <span id="cpwd_show"></span>
       </p>
       <p>
           电子邮箱:<input type="email" name="uemail" >
       </p>
       <p>
           联系方式:<input type="text" name="phone" >
       </p>
       <p>
           真实姓名：<input type="text" name="user_name" >
       </p>
       <p>
           用户性别：<select name="ugender" id="ugender" >
                        <option value="1">男</option>
                        <option value="0">女</option>
                        <option value="2">保密</option>
                  </select>
       </p>
       <p>
           <input type="submit" value="注册">
       </p>

   </form>


    
    <script>
        function check_uanme() {
            var xhr = createXhr();

            xhr.onreadystatechange=function () {
                if(xhr.readyState==4&&xhr.status==200){
                    var res=xhr.responseText;
                    $("uname_show").innerHTML=res;
                }
            }

            var uname = $("uname").value;
            xhr.open("get","02_check_uname.php?uname=" + uname,true);
            xhr.send(null);

        }
        
        function check_pwd() {
            var upwd = $("upwd").value;
            var cpwd = $("cpwd").value;
            if(upwd == cpwd && upwd != null){
                 $("cpwd_show").innerHTML = "通过";
            }else{
                $("cpwd_show").innerHTML = "两次密码不一致";
            }
        }

    </script>
</body>
</html>